# 账芽记账软件功能梳理

## 1. 目标与范围

- 产品目标：降低记账门槛，帮助用户长期持续记录并复盘个人财务。
- 目标用户：个人用户为主，后续可扩展到家庭协作场景。
- 本文范围：移动端/网页端通用的功能清单与优先级，不含具体 UI 方案。

## 2. 功能优先级分层

### P0（MVP 必须有）

1. 用户与数据隔离
- 注册、登录、退出
- 账号会话管理（基础安全策略）
- 用户数据隔离（只能访问自己的账目）

2. 账本与账户体系
- 默认账本（可支持多个账本）
- 账户管理：现金、银行卡、信用卡、电子钱包等
- 账户初始余额与余额调整

3. 交易记录核心
- 记录类型：支出、收入、转账
- 字段：金额、时间、分类、账户、备注
- 交易 CRUD（新增、编辑、删除、查看）
- 快速记账（最少步骤录入）

4. 分类与标签
- 内置分类（餐饮、交通、住房等）
- 自定义分类（新增、编辑、停用）
- 标签能力（可选）

5. 列表与筛选
- 按时间查看流水（日/周/月）
- 条件筛选：账户、分类、金额区间、关键词
- 交易搜索（备注/分类等）

6. 基础统计报表
- 月度收支汇总（收入、支出、结余）
- 分类支出占比
- 收支趋势（按天/按月）
- 账户余额总览

### P1（增强体验）

1. 预算与预警
- 月总预算、分类预算
- 预算使用进度
- 超支提醒

2. 周期性交易与提醒
- 周期规则：每天/每周/每月
- 到期提醒（账单、还款日）
- 自动生成待确认流水

3. 数据导入导出
- 导出 CSV/Excel
- 导入常见账单格式（带字段映射）
- 导入错误提示与回滚

4. 高级统计与复盘
- 同比/环比
- 固定支出识别
- 消费习惯洞察（高频分类、异常支出）

### P2（差异化能力）

1. 多币种与汇率
- 多币种账户
- 汇率换算与历史汇率

2. 家庭/多人协作
- 共享账本
- 成员权限（查看/编辑/管理员）
- 操作日志

3. 自动化与智能化
- 记账规则引擎（如特定商户自动归类）
- OCR 小票识别
- AI 辅助分类与建议

## 3. 核心数据对象建议

1. User
- id、name、email、timezone、currency

2. Ledger（账本）
- id、userId、name、isDefault、createdAt

3. Account（账户）
- id、ledgerId、name、type、currency、initialBalance、status

4. Category（分类）
- id、ledgerId、name、type(income/expense)、parentId、status

5. Transaction（流水）
- id、ledgerId、accountId、type(expense/income/transfer)
- amount、currency、occurredAt、categoryId、note、tags[]
- transferAccountId（转账目标账户，可选）

6. Budget（预算）
- id、ledgerId、period(monthly)、amount、categoryId（可选）

## 4. 非功能需求（必须提前明确）

1. 数据正确性
- 金额使用定点数/最小货币单位存储，避免浮点误差
- 转账需保证双边一致性（扣减与增加同时成功）

2. 性能
- 常用列表分页与索引优化
- 报表查询支持缓存或预聚合

3. 安全与隐私
- 敏感操作审计日志
- 传输与存储加密策略
- 数据导出权限控制

4. 可用性
- 时区处理一致
- 弱网下可恢复（失败重试/草稿暂存）

## 5. 推荐迭代路线

1. 第一阶段（2-4 周）
- 完成 P0：记账闭环 + 基础报表 + 搜索筛选

2. 第二阶段（2-3 周）
- 完成 P1：预算、周期交易、导入导出

3. 第三阶段（持续迭代）
- 按用户反馈选择 P2：协作、多币种、智能化
